<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>adressmin</title>

    <script src="js/jquery-1.8.3.js" type="text/javascript" ></script>
    <script src="layer/layer.js" type="text/javascript" ></script>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js" type="text/javascript" ></script>
    <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.min.css"/>




</head>
<body>

<h4 class="text-right"><div class="label label-info " id="add">新增</div> </h4>
<table class="table table-bordered" id="table_id_example">

    <thead>
    <tr >
        <td>收款人</td>
        <td>收款卡号</td>
        <td>操作</td>
    </tr>
    </thead>

    <thead id="list"></thead>

    <tr >
        <td>张三</td>
        <td>1000001</td>
        <td ><input type="button" value="删除" class="del"/></td>
    </tr>

</table>


<nav aria-label="Page navigation">
    <ul class="pagination">
        <!--<li>
            <a href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>-->
        <li><a href="#">首页</a></li>
        <li class="active"><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
        <li><a href="#">尾页</a></li>
        <!--<li>
            <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>-->
    </ul>
</nav>



<script>


    $(function(){

        var currPage;
        var pageSize;
        var count;
        var totalPage;


             $.ajax({
                 url : "ac/listAddress",//请求地址
                 dataType : "json",//数据格式
                 type : "get",//请求方式
                 data :{currentPage:'1',pagesize:'5'},
                 //async : false,//是否异步请求
                 success : function(data) {   //如何发送成功
                  //console.log(data);
                     currPage=data.currPage;
                     pageSize=data.pageSize;
                     count=data.count;
                     totalPage=data.totalPage;

                 var ls = data.objList;
                 var html = "";
                 $.each(ls,function (index,item) {
                     console.log(item);
                     console.log(item.accno);
                     html +='<tr><td>'+item.username+'</td><td>'+item.accno+'</td><td><input type="button" value="删除" class="del"/></td></tr>';
                  })

                 /*for(var i=0;i<ls.length;i++){    //遍历data数组
                     //alert("username："+ls.username);
                     html +='<tr><td>'+ls.accno+'</td><td>'+ls.username+'</td><td><input type="button" value="删除" id="del"/></td></tr>';
                 }*/
                   //$("#table_id_example").html(html); //在html页面id=ulul的标签里显示html内容
                     $("#list").append(html);
                },
         })





        $('#add').on('click', function(){
            layer.open({
                type: 2,
                title: '新增收款人页面',
                shadeClose: true,
                shade: 0.8,
                area: ['380px', '90%'],
                content: 'insertadress.html' //iframe的url
            });
        });

        $('.del').on('click', function(){
            layer.confirm('确定删除此收款人？', {
                btn: ['是','否'] //按钮
            }, function(){
                layer.msg('已删除', {icon: 1,time: 800});
            }, function(){
                layer.msg('已取消删除', {
                    icon: 1,time: 800   //0.8s后自动关闭
                    //time: 6000,
                    /*btn: ['明白了', '知道了']*/
                });
            });
        });


    })


</script>


</body>
</html>